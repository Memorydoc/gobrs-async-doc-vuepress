---
title: FAQ
date: 2020-05-25 12:01:52
permalink: /pages/9cc27d
sidebar: false
article: false
---
* ###### [Q:spring.gobrs.async.rules 配置多个name时，rules 后面的字符串很长，不便于阅读与维护，个人建议 rules 是否可将对应的数据类型改成 List，yaml中配置更加直观](#q-spring-gobrs-async-rules-配置多个name时-rules-后面的字符串很长-不便于阅读与维护-个人建议-rules-是否可将对应的数据类型改成-list-yaml中配置更加直观-2)
* ###### [Q:为什么依赖jar包里GobrsAsyncProperties类中的rules属性变成string了？](#为什么依赖jar包里gobrsasyncproperties类中的rules属性变成string了)
* ###### [Q:任一任务失败时如何实现全体任务回滚？](#任一任务失败时如何实现全体任务回滚)
* ###### [Q:建议readme的编码格式改为utf-8](#建议readme的编码格式改为utf-8)
* ###### [Q: 主线程卡死，无法得到响应 1.2.1版本?](#主线程卡死-无法得到响应-1-2-1版本)
* ###### [Q: 编排任务中nessary默认为false，不执行任务，望修改为默认true](#编排任务中nessary默认为false-不执行任务-望修改为默认true)

### Q:spring.gobrs.async.rules 配置多个name时，rules 后面的字符串很长，不便于阅读与维护，个人建议 rules 是否可将对应的数据类型改成 List，yaml中配置更加直观
![问答一](https://kevin-cloud-dubbo.oss-cn-beijing.aliyuncs.com/gobrs-async/130813_b25f1ffa_1657354.webp)
A: 可以换行的。下个版本支持～
Q: please assigned it to me
A: OK Fork the project and submit pr, I will merge it for you

### 为什么依赖jar包里GobrsAsyncProperties类中的rules属性变成string了？
A: rules 属性类型由 string 变成 对象了 有使用者希望在配置的时候更加方便些

### 任一任务失败时如何实现全体任务回滚？
A: 需要在rollback方法中写一个事务补偿实现， 框架在出现异常后会回调该补偿方法。

### 建议readme的编码格式改为utf-8
A: 已经调整为utf-8

### 主线程卡死，无法得到响应 1.2.1版本
环境说明:
`io.github.memorydoc
gobrs-async-starter
1.2.1-RELEASE`
场景配置：
```yaml
spring:
gobrs:
async:
rules:
- name: "test"
  content: "AService->BService->CService,FService->HService"

```
  其中BService 抛出异常，BService配置
```java 
public class BService extends AsyncTask<Object, Object>
```
现象:
主线程卡死无返回。
原因是在 `com.gobrs.async.TaskLoader#stopSingleTaskLine` 处理时候`upstreamDepdends` 把变量处理为 -1.
建议这块stop 必须处理的不在 采用外围的 计数， 而是必须促发 且 使用变量控制只能促发一次

A: 已经修复到最新版本里，感谢提出问题！

### 编排任务中nessary默认为false，不执行任务，望修改为默认true?
A: 收到 马上安排!😎




::: cardList

```yaml
- name: 技术小屋
  desc: 大道至简，知易行难
  avatar: https://cdn.jsdelivr.net/gh/xugaoyi/image_store/blog/20200122153807.jpg # 可选
  link: https://docs.sizegang.cn/ # 可选
  bgColor: '#CBEAFA' # 可选，默认var(--bodyBg)。颜色值有#号时请添加单引号
  textColor: '#6854A1' # 可选，默认var(--textColor)
- name: 架构师必经之路
  desc: '精品学习资源'
  avatar: https://cdn.jsdelivr.net/gh/xaoxuu/assets@master/avatar/avatar.png
  link: https://learn.sizegang.cn
  bgColor: '#718971'
  textColor: '#fff'
- name: 平凡的你我
  desc: 快乐购物，享受生活
  avatar: https://reinness.com/avatar.png
  link: https://m.jd.com
  bgColor: '#FCDBA0'
  textColor: '#A05F2C'
```
:::
